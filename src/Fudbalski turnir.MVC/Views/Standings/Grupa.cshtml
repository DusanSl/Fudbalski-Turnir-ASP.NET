@model Dictionary<string, List<StandingsViewModel>>

@if (Model != null && Model.Any())
{
    <div class="row">
        @foreach (var grupa in Model.OrderBy(g => g.Key))
        {
            <div class="col-lg-6 mb-4">
                <div class="bg-dark border border-primary rounded-3 shadow-lg overflow-hidden">

                    <div class="bg-primary bg-gradient p-2 text-center text-white">
                        <h5 class="mb-0 fw-bold text-uppercase" style="letter-spacing: 1px;">Grupa @grupa.Key</h5>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-dark table-hover table-bordered border-secondary mb-0 align-middle">
                            <thead class="border-bottom border-secondary">
                                <tr class="text-center text-secondary small text-uppercase">
                                    <th style="width: 40px;">#</th>
                                    <th class="text-start text-white">Klub</th>
                                    <th class="text-white">O</th>
                                    <th class="text-success">P</th>
                                    <th class="text-warning">N</th>
                                    <th class="text-danger">I</th>
                                    <th class="d-none d-md-table-cell text-success">DG</th>
                                    <th class="d-none d-md-table-cell text-danger">PG</th>
                                    <th class="text-white">GR</th>
                                    <th class="bg-primary bg-opacity-10 text-primary">Bodovi</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var klub in grupa.Value)
                                {
                                    var index = grupa.Value.IndexOf(klub) + 1;

                                    <tr class="text-center">
                                        <td class="text-white-50 small">@index.</td>
                                        <td class="text-start">
                                            <a asp-controller="Klubovi"
                                               asp-action="Details"
                                               asp-route-id="@klub.KlubID"
                                               class="fw-bold text-white text-decoration-none link-primary club-link">
                                                @klub.KlubNaziv
                                            </a>
                                        </td>
                                        <td>@klub.Odigrano</td>
                                        <td>@klub.Pobede</td>
                                        <td>@klub.Nereseno</td>
                                        <td>@klub.Porazi</td>
                                        <td class="d-none d-md-table-cell text-white-50 small">@klub.DatiGolovi</td>
                                        <td class="d-none d-md-table-cell text-white-50 small">@klub.PrimljeniGolovi</td>
                                        <td>
                                            @{
                                                int gr = klub.DatiGolovi - klub.PrimljeniGolovi;
                                                string grBoja = gr > 0 ? "text-success" : (gr < 0 ? "text-danger" : "text-white-50");
                                                <span class="@grBoja fw-bold">@(gr > 0 ? "+" + gr : gr.ToString())</span>
                                            }
                                        </td>
                                        <td class="bg-primary bg-opacity-25 text-primary fw-bolder fs-5">@klub.Bodovi</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="container-fluid mt-2">
        <div class="bg-dark border border-secondary border-opacity-25 rounded-3 p-3 shadow-sm">
            <div class="row g-3 justify-content-center text-center align-items-center">

                <div class="col-auto">
                    <span class="badge bg-light text-dark opacity-75">O</span>
                    <small class="text-white-50 ms-1">Odigrano</small>
                </div>
                <div class="col-auto">
                    <span class="badge bg-success opacity-75">P</span>
                    <small class="text-white-50 ms-1">Pobede</small>
                </div>
                <div class="col-auto">
                    <span class="badge bg-warning text-dark opacity-75">N</span>
                    <small class="text-white-50 ms-1">Nerešeno</small>
                </div>
                <div class="col-auto">
                    <span class="badge bg-danger opacity-75">I</span>
                    <small class="text-white-50 ms-1">Izgubljeno</small>
                </div>

                <div class="col-auto">
                    <span class="badge bg-success opacity-75">DG</span>
                    <small class="text-white-50 ms-1">Dati Golovi</small>
                </div>
                <div class="col-auto">
                    <span class="badge bg-danger opacity-75">PG</span>
                    <small class="text-white-50 ms-1">Primljeni Golovi</small>
                </div>

                <div class="col-auto">
                    <span class="badge bg-secondary opacity-75">GR</span>
                    <small class="text-white-50 ms-1">Gol Razlika</small>
                </div>
            </div>
        </div>
    </div>
}

else
{
    <div class="alert alert-warning">Nema podataka o grupama za ovaj turnir.</div>
}