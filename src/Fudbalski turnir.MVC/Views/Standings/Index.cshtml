@model GrupnaFazaViewModel
@{
    ViewData["Title"] = "Tabela Turnira";
}

<h1>Tabela Turnira</h1>

<div class="row mb-4">
    <div class="col-md-6">
        <form method="get" asp-action="Index">
            <div class="form-group">
                <label class="form-label fw-bold">Izaberite Turnir:</label>

                <select name="turnirId" class="form-select bg-dark text-white border-primary shadow-none" onchange="this.form.submit()">
                    <option value="" class="bg-dark text-white">Svi turniri</option>
                    @foreach (var item in (SelectList)ViewBag.Turniri)
                    {
                        <option value="@item.Value"
                                selected="@(item.Value == ViewBag.SelectedTurnirId?.ToString())"
                                class="bg-dark text-white">
                            @item.Text
                        </option>
                    }
                </select>
            </div>
            <input type="hidden" name="faza" value="@(ViewBag.SelectedFaza ?? "Grupna")" />
        </form>
    </div>
</div>

@if (ViewBag.SelectedTurnirId != null)
{
    <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
            <a class="nav-link @(ViewBag.SelectedFaza == "Grupna" ? "active" : "")"
               asp-route-turnirId="@ViewBag.SelectedTurnirId" asp-route-faza="Grupna">Grupna Faza</a>
        </li>
        <li class="nav-item">
            <a class="nav-link @(ViewBag.SelectedFaza == "Eliminaciona" ? "active" : "")"
               asp-route-turnirId="@ViewBag.SelectedTurnirId" asp-route-faza="Eliminaciona">Eliminaciona Faza</a>
        </li>
    </ul>

    @if (ViewBag.SelectedFaza == "Grupna")
    {
        <partial name="Grupa" model="Model.Grupe" />
    }
    else
    {
        <partial name="Knockout" model="Model.Bracket" />
    }
}

<div class="mt-3">
    <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Nazad na početnu</a>
</div>