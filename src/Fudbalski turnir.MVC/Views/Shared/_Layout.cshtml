<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Fudbalski Turnir</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <link rel="shortcut icon" href="~/ballicon.png" type="image/svg+xml">
    <link rel="icon" href="~/ballicon.png" type="image/svg+xml">
    <link rel="stylesheet" href="~/css/main.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Fudbalski_turnir.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css">
</head>
<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark sticky-top border-bottom border-secondary border-opacity-25" style="backdrop-filter: blur(10px);">
            <div class="container">
                <a class="navbar-brand fw-bold text-white d-flex align-items-center" asp-area="" asp-controller="Home" asp-action="Index">
                    <img src="~/ballicon.png" alt="Logo" width="30" height="30" class="me-2">
                    Fudbalski Turnir
                </a>

                <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto align-items-lg-center">
                        <li class="nav-item">
                            @* on hover text-white without !important would be nice*@
                            <a class="nav-link text-white-50 whitetexthover fs-5" asp-area="" asp-controller="Home" asp-action="Index">Početna</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white-50 whitetexthover fs-5" asp-area="" asp-controller="Rezultati" asp-action="Index">Rezultati</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white-50 whitetexthover fs-5" asp-area="" asp-controller="Standings" asp-action="Index">Tabele</a>
                        </li>
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <li class="nav-item">
                                <a class="nav-link text-white-50 whitetexthover fs-5" asp-area="" asp-controller="Admin" asp-action="Index">Admin</a>
                            </li>
                        }
                    </ul>

                    <ul class="navbar-nav align-items-lg-center">
                        <partial name="_LoginPartial" />
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div class="container">
        <main role="main" class="pb-3">
            @{
                var title = ViewData["Title"]?.ToString() ?? "";
                bool isIdentityPage = title.Replace(" ", "").Contains("Login", StringComparison.OrdinalIgnoreCase) ||
                title.Contains("Register", StringComparison.OrdinalIgnoreCase);
            }

            @if (isIdentityPage)
            {
                <div class="identity-wrapper d-flex align-items-center justify-content-center min-vh-100 px-3">
                    <div class="glass-card p-4 p-md-5 mx-auto w-100" style="max-width: 450px;">
                        @RenderBody()
                    </div>
                </div>
            }
            else
            {
                <div class="container py-3" style="min-height: 20vh;">
                    @RenderBody()
                </div>
            }
        </main>
    </div>

    <footer class="border-top border-secondary border-opacity-25 mt-5 py-4" style="background: rgba(15, 23, 42, 0.4); backdrop-filter: blur(10px);">
    <div class="container">
        <div class="row align-items-center gy-4">
                <div class="col-md-4 text-center text-md-start">
                    <a class="navbar-brand fw-bold text-white mb-1 d-flex align-items-center justify-content-center justify-content-md-start" asp-area="" asp-controller="Home" asp-action="Index">
                        <img src="~/ballicon.png" alt="Logo" width="24" height="24" class="me-2">
                        Fudbalski Turnir
                    </a>
                    <span class="text-white-50 small">&copy; 2026 - Sva prava zadržana.</span>
                </div>

            <div class="col-md-4 text-center">
                <h5 class="fw-bold text-white mb-2">Kontakt</h5>
                <p class="text-white-50 mb-1 small">📧 info@fudbalskiturnir.com</p>
                <p class="text-white-50 mb-0 small">☎️ +1 234 567 89</p>
            </div>

            <div class="col-md-4 text-center text-md-end">
                </div>

        </div>
    </div>
</footer>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const isIdPage = document.querySelector('.identity-wrapper') !== null ||
                             window.location.pathname.toLowerCase().includes('/account/') ||
                             window.location.pathname.toLowerCase().includes('/identity/');

            if (!isIdPage) return;

                    const translations = {
            'Email': 'Email',
            'Password': 'Lozinka',
            'Confirm Password': 'Potvrdite lozinku',
            'Confirm password': 'Potvrdite lozinku',
            'Remember me?': 'Zapamti me?',
            'Log in': 'Prijavite se',
            'Register': 'Registrujte se',
            'Forgot your password?': 'Zaboravili ste lozinku?',
            'Register as a new user': 'Registrujte se kao novi korisnik',
            'Resend email confirmation': 'Pošaljite ponovo potvrdu emaila',
            'Enter your email.': 'Napišite vas email.',

            'Manage your account': 'Upravljajte nalogom',
            'Change your account settings': 'Promenite podešavanja naloga',
            'Profile': 'Profil',
            'Username': 'Korisničko ime',
            'Phone number': 'Broj telefona',
            'Save': 'Sačuvajte',
            'Two-factor authentication': 'Dvofaktorska autentifikacija',
            'Two-factor authentication (2FA)': 'Dvofaktorska autentifikacija (2FA)',
            'Personal data': 'Lični podaci',
            'Personal Data': 'Lični podaci',
            'Reset Password' : 'Resetujte lozinku',
            'Change password': 'Promenite lozinku',
            'Old password': 'Stara lozinka',
            'Current password': 'Trenutna lozinka',
            'New password': 'Nova lozinka',
            'Confirm new password': 'Potvrdite novu lozinku',
            'Change email': 'Promenite email',
            'Manage Email': 'Upravljajte emailom',
            'Delete account': 'Obrišite nalog',
            'Logout': 'Odjavite se',
            'Download': 'Preuzmite',
            'Delete': 'Obrišite',

            'Authenticator app': 'Autentifikator aplikacija',
            'Add authenticator app': 'Dodajte autentifikator aplikaciju',
            'Configure authenticator app': 'Podesite autentifikator aplikaciju',
            'Reset authenticator app': 'Resetujte autentifikator aplikaciju',
            'Disable 2FA': 'Onemogući 2FA',
            'Enable 2FA': 'Omogući 2FA',

            'Your account contains personal data that you have given us. This page allows you to download or delete that data.': 'Vaš nalog sadrži lične podatke koje ste nam dali. Ova stranica vam omogućava da preuzmete ili obrišete te podatke.',
            'Deleting this data will permanently remove your account, and this cannot be recovered.': 'Brisanje ovih podataka će trajno ukloniti vaš nalog i to se ne može vratiti.',

            'Submit': 'Potvrdite',
            'Cancel': 'Otkažite',
            'Update': 'Ažurirajte',
            'Change': 'Promenite',
            'Create': 'Kreirajte',
            'Resend': 'Pošaljite ponovo',
            'Update password': 'Ažurirajte lozinku',

            'The Email field is required.': 'Email je obavezan.',
            'The Password field is required.': 'Lozinka je obavezna.',
            'The passwords do not match.': 'Lozinke se ne poklapaju.',
            'Invalid login attempt.': 'Neuspešan pokušaj prijave.',
            'Please enter a valid email address.': 'Molimo unesite validan email.',
            'The phone number is invalid.': 'Broj telefona nije validan.',
            'The current password is incorrect.': 'Trenutna lozinka je netačna.',
            'Email is required.': 'Email je obavezan.',
            'Password is required.': 'Lozinka je obavezna.',
            'Passwords do not match.': 'Lozinke se ne poklapaju.',

            'Your profile has been updated': 'Vaš profil je ažuriran',
            'Your password has been changed': 'Vaša lozinka je promenjena',
            'Your email has been changed': 'Vaš email je promenjen',
            'Your authenticator app has been verified': 'Vaša autentifikator aplikacija je verifikovana',
            };

                            function translate() {
                try {
                    const elements = document.querySelectorAll('h1, h2, h3, h4, h5, label, a, button, span, p, strong');

                    elements.forEach(el => {
                        if (el.tagName === 'LABEL' && el.querySelector('input[type="checkbox"]')) {
                            for (let node of el.childNodes) {
                                if (node.nodeType === 3) {
                                    let t = node.textContent.trim().replace(/\s+/g, ' ');
                                    if (translations[t]) node.textContent = node.textContent.replace(node.textContent.trim(), translations[t]);
                                }
                            }
                            return;
                        }

                        if (el.children.length === 0) {
                            let t = el.textContent.trim().replace(/\s+/g, ' ');
                            if (translations[t]) el.textContent = translations[t];
                        }
                    });

                    document.querySelectorAll('input[placeholder]').forEach(input => {
                        let p = input.getAttribute('placeholder').trim();
                        if (translations[p]) input.setAttribute('placeholder', translations[p]);
                    });
                } catch (e) { console.error("Translation error:", e); }
            }

            translate();

            document.addEventListener('keyup', translate);
            document.addEventListener('click', translate);
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
